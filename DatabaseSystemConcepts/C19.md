# 日志与恢复

数据库故障种类：

1. 事务故障

   * 逻辑错误：事务因为一些内部错误条件导致无法完成，比如违反完整性约束或者引用约束
   * 内部状态错误：数据库管理系统由于必须终止一个活跃的事物，比如死锁
2. 系统故障

   * 软件故障：数据库系统自身错误，比如未捕获的异常
   * 硬件故障：运行数据库系统的电脑崩溃了
3. 存储媒介故障

   * 非易失性存储故障
   * 只能通过备份恢复
   

需要在日志协议中保证以下两点：

1. 持久性：事务被提交后它的修改是持久的
2. 原子性：如果事务被终止了，那么不会有部分修改是持久的（也就是要么全做，要么全不做



