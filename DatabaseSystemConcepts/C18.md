# 并发控制理论

ACID：

* 原子性

* 一致性

* 隔离性：

  1. 不可重复读： 在读取之后另一个事务修改了读取的值，再次读取会读到不一样的值
  2. 脏读： 读取未提交的数据
  3. 覆写未提交的数据

  用依赖图来判断冲突，如果无环，则该事务是冲突可串行化的。

* 持久性



两阶段锁协议（2 phase lock）：

1. 增长阶段：每个事务去向lock manager申请所需要的lock。
2. 缩减阶段：每个事务释放自己之前所申请的lock，不能再申请新的lock。

缺点：

1. 限制并发性
2. 有的可串行化的schedules不遵循2PL
3. 不能防止脏读
   * 使用强严格2PL：强严格2PL只会在事务提交后一次性释放所有的锁，这样做可以避免脏读发生。同时也可以避免级联回滚（是否导致级联回滚的就是脏读？）
4. 可能导致死锁
   * 死锁预防或者检测



